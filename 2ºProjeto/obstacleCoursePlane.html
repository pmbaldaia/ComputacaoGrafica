<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>THE SKATER</title>
    <style>
        body {
            /* set margin to 0 and overflow to hidden, to use the complete page */
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <!-- HTML body will hold the Output -->
    <script type="module">
        import * as THREE from './libs/three.module.js';

        let camera, scene, renderer;
        let cube;

        // once everything is loaded, we run our Three.js stuff
        window.onload = function init() {

            /*********************
             * SCENE 
             * *******************/
            // create an empty scene, that will hold all our elements such as objects, cameras and lights
            scene = new THREE.Scene();

            /***********************  
            CAMERA 
            ***********************/
            // create a camera, which defines where we're looking at
            const aspect = window.innerWidth / window.innerHeight;
            camera = new THREE.PerspectiveCamera(60, aspect, 1, 1500);
            camera.position.x = 1200;
            camera.position.y = 300;
            camera.position.z = 0;
            camera.lookAt(scene.position); //point the camera to the center of the scene

            /*********************
             * RENDERER 
             * *******************/
            // create a render and set the size
            renderer = new THREE.WebGLRenderer({ antialias: false }); // aliasing (jagged edges when rendering)
            renderer.setSize(window.innerWidth, window.innerHeight);
            // configure renderer clear color
            renderer.setClearColor("#BBD9ED");

            // add the output of the renderer to an HTML element (this case, the body)
            document.body.appendChild(renderer.domElement);

            /*********************
            * LIGHTS 
            *********************/
            let light = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(light);

            let light2 = new THREE.PointLight(0xffffff, 1);
            light2.position.set(1500, 1100, 0);
            scene.add(light2);

            /*****************************
             * MESH = GEOMETRY + MATERIAL 
             * ***************************/
            // create an object 3D - a cube
            let sphGeo = new THREE.SphereGeometry(80, 7, 8)
            let material = new THREE.MeshLambertMaterial({color: 0x998066, wireframe: false });
            cube = new THREE.Mesh(sphGeo, material);
            // add the cube to the scene
            scene.add(cube);

            // Create a plane 
            let planeGeometry = new THREE.PlaneBufferGeometry(10000, 10000, 32, 32);
            let planeMaterial = new THREE.MeshLambertMaterial({ color: 0xCDCF9D, side: THREE.DoubleSide });
            let plane = new THREE.Mesh(planeGeometry, planeMaterial);
            plane.name = "plane"
            plane.rotation.x = - Math.PI / 2;
            plane.position.y = -1;
            scene.add(plane);

            /*****************************
             * ANIMATE 
             * ***************************/
            // set the animation function
            renderer.setAnimationLoop(render);
        }


        function render() {

            //moving cube
            if (cube.position.x < 1350){
                cube.position.x += 10
            } else if (cube.position.x >= 10) {
                cube.position.x = -600
                cube.position.y = -220
                if (cube.position.z == 0){
                    cube.position.z = Math.random() > 0.5 ? 300 : -300
                } else if (cube.position.z == 300) {
                    cube.position.z = Math.random() > 0.5 ? 0 : -300
                } else if (cube.position.z == -300) {
                    cube.position.z = Math.random() > 0.5 ? 0 : 300
                }
            }

            if(cube.position.x > 750){
                cube.position.y -= 5    
            } else if (cube.position.x < 850 && cube.position.y < 0){
                cube.position.y += 5
            }               
            console.log(cube.position);
            // render the scene into viewport using the camera
            renderer.render(scene, camera);
        }

    </script>
</body>

</html>